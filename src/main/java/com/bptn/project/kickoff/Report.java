package com.bptn.project.kickoff;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.List;
import java.util.Map;

public class Report {
	private BufferedWriter writer;
	private Team homeTeam;

	//sets an instance of the team based on parameter
	public Report(Team team) {
		this.homeTeam = team;
	}

	//method that calls the two report generation
	public void generateReports() {
		generateTeamReport();
		generateMatchReport();
	}
	
	//using a bufferedwriter with a filewriter to write into a new text file. 
	public void generateTeamReport() {
		try { 
			writer = new BufferedWriter(new FileWriter("MyTeam.txt"));
			writer.write("ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°");
			writer.write("\n");
			writer.write("       			ğŸ‘‘ "  + homeTeam.getTeamName() + "'s TEAM REPORT           ");
			writer.write("\n");
			writer.write("ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°");
			writer.write("\n");
			writer.write("	âšœï¸Team Name: " + homeTeam.getTeamName());
			writer.write("\n");
			writer.write("	ğŸ²Total Matches Created: " + homeTeam.getTotalMatches());
			writer.write("\n");
			writer.write("	ğŸŸï¸Total Matches Played: " + homeTeam.getMatches().values().stream().filter(match -> match.isMatchPlayed() == true).count());
			writer.write("\n");
			writer.write("	âš½Total Goals: " + homeTeam.getTotalGoals());
			writer.write("\n");
			writer.write("â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–");
			writer.write("\n");
			writer.write("â–â–â–â–â–           ğŸ“ŠPLAYER STATISTIC            â–â–â–â–â–");

			for(Map.Entry<Integer, Player> player : homeTeam.getRoster().entrySet()) { 
				writer.write("\n");
				writer.write("ğŸ“›Player Name: " + player.getValue().getName());
				writer.write("\n");
				writer.write("	#ï¸âƒ£Player Number: " + player.getValue().getNumber());
				writer.write("\n");
				writer.write("	ğŸ§³Player Position: " + player.getValue().getPosition());
				writer.write("\n");
				writer.write("	âš½Player Goals: " + player.getValue().getGoalScored());
				writer.write("\n");
				writer.write("	ğŸŸ¨Player YellowCards: " + player.getValue().getYellowCard());
				writer.write("\n");
				writer.write("	ğŸŸ¥Player RedCards: " + player.getValue().getRedCard());
				writer.write("\n");
				writer.write("â–â–â–â–â–â–                                         â–â–â–â–â–");
				writer.write("\n");
			}
			writer.write("\n");
			writer.write("â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–");
			writer.write("\n");
			writer.write("â–â–â–â–â–                  ğŸEND                   â–â–â–â–â–");
			writer.write("\n");
			writer.write("â–â–â–â–â–          ğŸš€generated by KickOffâ„¢ï¸        â–â–â–â–â–");
			writer.write("\n");
			writer.write("ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°");
			writer.close();
			System.out.println(Color.BLACK_BOLD + Color.GREEN_BACKGROUND + "âœ…Team report generated: MyTeam.txt" + Color.RESET);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			System.out.println(Color.BLACK_BACKGROUND + Color.RED_BOLD_BRIGHT + "âŒFailed to generate the team report." + Color.RESET);
			//e.printStackTrace();
		}
		
	}
	//generate a report specific for the team's match data
	public void generateMatchReport() {
		try {
			writer = new BufferedWriter(new FileWriter("MyMatches.txt"));
			writer.write("ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°");
			writer.write("\n");
			writer.write("            		ğŸ² " + homeTeam.getTeamName() + "'s MATCHES                  ");
			writer.write("\n");
			writer.write("ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°");
			writer.write("\n");
			writer.write("â–â–â–â–â–            ğŸ’¯COMPLETED MATCHES           â–â–â–â–â–");
			writer.write("\n");
			
			List<Match> playedMatches = homeTeam.getMatches().values().stream().filter(match -> match.isMatchPlayed() == true).toList();
			for (Match match : playedMatches) {
				writer.write("	ğŸ“£Title: " + match.getTitle());
				writer.write("\n");
				writer.write("	ğŸ†Results: " + match.getAwayTeamName() + " [ " + match.getAwayTeamScore() + " : " + match.getHomeTeamScore() + " ] " + match.getHomeTeamName());
				writer.write("\n");
				writer.write("â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–") ;
				writer.write("\n");
			}
			writer.write("â–â–â–â–â–              ğŸ”œUPCOMING MATCHES              â–â–â–â–â–");
			writer.write("\n");
			
			List<Match> unplayedMatches = homeTeam.getMatches().values().stream().filter(match -> match.isMatchPlayed() == false).toList();
			for (Match match : unplayedMatches) {
				writer.write("	ğŸ“¢Title: " + match.getTitle());
				writer.write("\n");
				writer.write("	ğŸ—’ï¸Description: " + match.getDescription());
				writer.write("\n");
				writer.write("	ğŸ“…Date: " + match.getDate());
				writer.write("\n");
				writer.write("	ğŸ“Location: " + match.getLocation());
				writer.write("\n");
				writer.write("â–â–â–â–â–                                             â–â–â–â–â–");
				writer.write("\n");
			}
			writer.write("\n");
			writer.write("â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–");
			writer.write("\n");
			writer.write("â–â–â–â–â–                   ğŸEND                  â–â–â–â–â–");
			writer.write("\n");
			writer.write("â–â–â–â–â–          generated by ğŸš€KickOffâ„¢ï¸        â–â–â–â–â–");
			writer.write("\n");
			writer.write("ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°ğŸŸ°");
			writer.close();
			System.out.println(Color.BLACK_BOLD + Color.GREEN_BACKGROUND + "âœ…Match report generated: MyMatches.txt" + Color.RESET);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			System.out.println(Color.BLACK_BACKGROUND + Color.RED_BOLD_BRIGHT + "âŒFailed to generate the match report." + Color.RESET);
			//e.printStackTrace();
		}
		
	}


}
